<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Repository Details</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="repo-header">
        <div class="repo-header-container">
            <div class="repo-header-left">
                <a href="index.html" class="back-link" title="Back to repositories">
                    <svg viewBox="0 0 16 16" fill="currentColor">
                        <path d="M7.78 12.53a.75.75 0 0 1-1.06 0L2.47 8.28a.75.75 0 0 1 0-1.06L6.72 2.97a.75.75 0 0 1 1.06 1.06L4.81 7h8.44a.75.75 0 0 1 0 1.5H4.81l2.97 2.97a.75.75 0 0 1 0 1.06Z"/>
                        </svg>
                </a>
                <div class="repo-name-text">InterviewAce</div>
                <div class="current-branch-indicator">
                    <svg class="branch-icon" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M9.5 3.25a2.25 2.25 0 1 1 3 2.122V6A2.5 2.5 0 0 1 10 8.5H6a1 1 0 0 0-1 1v1.128a2.251 2.251 0 1 1-1.5 0V5.372a2.25 2.25 0 1 1 1.5 0v1.836A2.493 2.493 0 0 1 6 7h4a1 1 0 0 0 1-1v-.628A2.25 2.25 0 0 1 9.5 3.25Zm-6 0a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Zm8.25-.75a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5ZM4.25 12a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Z"/>
                    </svg>
                    <span id="current-branch-name">main</span>
                </div>
            </div>
            
            <div class="repo-header-center">
                <div class="search-container">
                    <div class="search-box">
                        <svg class="search-icon" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M10.68 11.74a6 6 0 0 1-7.922-8.982 6 6 0 0 1 8.982 7.922l3.04 3.04a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215ZM11.5 7a4.499 4.499 0 1 0-8.997 0A4.499 4.499 0 0 0 11.5 7Z"/>
                        </svg>
                        <input type="text" id="repoSearchInput" placeholder="Search files..." oninput="filterFiles()">
                    </div>
                </div>
            </div>
            
            <div class="repo-header-right">
                <div class="action-buttons">
                    <button class="icon-btn" onclick="performUndo()" title="Undo">
                        <svg class="icon-svg" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M1.22 6.28a.749.749 0 0 1 0-1.06l3.5-3.5a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L3.56 5h7.69a2.75 2.75 0 0 1 0 5.5H9.5a.75.75 0 0 1 0-1.5h1.75a1.25 1.25 0 0 0 0-2.5H3.56l2.22 2.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215Z"/>
                        </svg>
                    </button>
                    <button class="icon-btn" onclick="performRedo()" title="Redo">
                        <svg class="icon-svg" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M14.78 6.28a.749.749 0 0 1 0 1.06l-3.5 3.5a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L12.44 7H4.75a2.75 2.75 0 0 1 0-5.5H6.5a.75.75 0 0 1 0 1.5H4.75a1.25 1.25 0 0 0 0 2.5h7.69l-2.22-2.22a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215Z"/>
                        </svg>
                    </button>
                    <button class="icon-btn" onclick="showHistory()" title="View action history">
                        <svg class="icon-svg" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M.427 1.927C.665 1.69.665 1.31.427 1.072a.25.25 0 0 0-.354 0C-.072 1.218-.072 1.596.073 1.741L1.97 3.64A5.998 5.998 0 0 1 8 2a6.006 6.006 0 0 1 6 6 .75.75 0 0 1-1.5 0 4.506 4.506 0 0 0-4.5-4.5c-1.288 0-2.47.558-3.293 1.444L6.604 6.84c.146.146.427.042.427-.177V5.25a.75.75 0 0 1 1.5 0v3.75a.75.75 0 0 1-.75.75H4.031a.75.75 0 0 1 0-1.5h1.414L.427 2.927Z"/>
                        </svg>
                    </button>
                    <button class="icon-btn" onclick="openModal('taskQueueModal')" title="View tasks">
                        <svg class="icon-svg" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M2.5 1.75v11.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0 0 14.5 13.25V4.664a1.75 1.75 0 0 0-.513-1.237L10.513.513A1.75 1.75 0 0 0 9.276 0H4.25A1.75 1.75 0 0 0 2.5 1.75Zm1.75-.25a.25.25 0 0 0-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25V4.664a.25.25 0 0 0-.073-.177l-3.474-3.474a.25.25 0 0 0-.177-.073H4.25Z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </header>
    <main class="repo-page-main">
        <div class="repo-container">
            <div class="repo-header-info">
                <div class="repo-description">
                    <p class="repo-description-text">DSA Questions</p>
                </div>
            </div>
            
            <div class="repo-navigation">
                <nav class="repo-nav">
                    <button class="nav-btn active" onclick="showSection('files')">
                        <svg class="nav-icon" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M1.75 1A1.75 1.75 0 0 0 0 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75 0 0 0 16 13.25v-8.5A1.75 1.75 0 0 0 14.25 3H7.5a.25.25 0 0 1-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75Z"/>
                        </svg>
                        <span>Files</span>
                    </button>
                    <button class="nav-btn" onclick="showSection('commits')">
                        <svg class="nav-icon" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M11.93 8.5a4.002 4.002 0 0 1-7.86 0H.75a.75.75 0 0 1 0-1.5h3.32a4.002 4.002 0 0 1 7.86 0h3.32a.75.75 0 0 1 0 1.5Zm-1.43-.75a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0Z"/>
                        </svg>
                        <span>Commits</span>
                    </button>
                    <button class="nav-btn" onclick="showSection('branches')">
                        <svg class="nav-icon" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M9.5 3.25a2.25 2.25 0 1 1 3 2.122V6A2.5 2.5 0 0 1 10 8.5H6a1 1 0 0 0-1 1v1.128a2.251 2.251 0 1 1-1.5 0V5.372a2.25 2.25 0 1 1 1.5 0v1.836A2.493 2.493 0 0 1 6 7h4a1 1 0 0 0 1-1v-.628A2.25 2.25 0 0 1 9.5 3.25Zm-6 0a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Zm8.25-.75a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5ZM4.25 12a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Z"/>
                        </svg>
                        <span>Branches</span>
                    </button>
                </nav>
            </div>
            
            <div class="repo-content">
                <div id="files-section" class="content-section active-section">
                    <div class="section-header">
                        <div class="section-actions">
                            <button class="primary-btn" onclick="openModal('newFileModal')">
                                <svg viewBox="0 0 16 16" fill="currentColor">
                                    <path d="M7.75 2a.75.75 0 0 1 .75.75V7h4.25a.75.75 0 0 1 0 1.5H8.5v4.25a.75.75 0 0 1-1.5 0V8.5H2.75a.75.75 0 0 1 0-1.5H7V2.75A.75.75 0 0 1 7.75 2Z"/>
                                </svg>
                                Create File
                            </button>
                            <button class="secondary-btn" onclick="openModal('uploadFileModal')">
                                <svg viewBox="0 0 16 16" fill="currentColor">
                                    <path d="M2.75 14A1.75 1.75 0 0 1 1 12.25v-2.5a.75.75 0 0 1 1.5 0v2.5c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25v-2.5a.75.75 0 0 1 1.5 0v2.5A1.75 1.75 0 0 1 13.25 14Z"/>
                                    <path d="M11.78 4.72a.749.749 0 1 1-1.06 1.06L8.75 3.811V9.5a.75.75 0 0 1-1.5 0V3.811L5.28 5.78a.749.749 0 1 1-1.06-1.06l3.25-3.25a.749.749 0 0 1 1.06 0l3.25 3.25Z"/>
                                </svg>
                                Upload File
                            </button>
                        </div>
                    </div>
                    <div class="content-body">
                        <div id="fileListContainer" class="file-list-container">
                        </div>
                    </div>
                </div>
                
                <div id="commits-section" class="content-section">
                    <div class="section-header">
                        <h3>Commit History</h3>
                    </div>
                    <div class="content-body">
                        <div class="commit-list-container">
                        </div>
                    </div>
                </div>
                
                <div id="branches-section" class="content-section">
                    <div class="section-header">
                        <div class="section-actions">
                            <button class="primary-btn" onclick="openModal('createBranchModal')">
                                <svg viewBox="0 0 16 16" fill="currentColor">
                                    <path d="M7.75 2a.75.75 0 0 1 .75.75V7h4.25a.75.75 0 0 1 0 1.5H8.5v4.25a.75.75 0 0 1-1.5 0V8.5H2.75a.75.75 0 0 1 0-1.5H7V2.75A.75.75 0 0 1 7.75 2Z"/>
                                </svg>
                                Create Branch
                            </button>
                            <div class="branch-controls">
                                <select id="branchSwitchSelect" onchange="switchToBranch(this.value)" class="branch-select">
                                    <option value="">Switch Branch...</option>
                                </select>
                                <button class="secondary-btn" onclick="openModal('mergeBranchModal')">
                                    <svg viewBox="0 0 16 16" fill="currentColor">
                                        <path d="M5.45 5.154A4.25 4.25 0 0 0 9.25 7.5h1.378a2.251 2.251 0 1 1 0 1.5H9.25A5.734 5.734 0 0 1 5 7.123v3.505a2.25 2.25 0 1 1-1.5 0V5.372a2.25 2.25 0 1 1 1.95-.218ZM4.25 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm8.5-4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM4.25 4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"/>
                                    </svg>
                                    Merge Branch
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="content-body">
                        <div id="branchListContainer" class="branch-list-container">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div id="newFileModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('newFileModal')">&times;</span>
            <h2>Create New File</h2>
            <p>Add a new file to your repository</p>
            <label for="fileName">File Name</label>
            <input type="text" id="fileName" placeholder="index.js">
            <label for="filePath">File Path (optional)</label>
            <input type="text" id="filePath" placeholder="src/components">
            <label for="fileContent">Content</label>
            <textarea id="fileContent" placeholder="Enter your code here..."></textarea>
            <label for="commitMessage">Commit Message</label>
            <input type="text" id="commitMessage" placeholder="Created new file">
            <button class="modal-action-btn" onclick="createNewFile()">Create File</button>
        </div>
    </div>
    <div id="uploadFileModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('uploadFileModal')">&times;</span>
            <h2>Upload File</h2>
            <p>Upload a file to your repository</p>
            <label for="chooseFileBtn">Choose File</label>
            <input type="file" id="actualChooseFile" style="display: none;" onchange="updateFileName(this)">
            <button id="chooseFileBtn" class="custom-file-upload" onclick="document.getElementById('actualChooseFile').click();">No file chosen</button>
            <label for="uploadFilePath">File Path (optional)</label>
            <input type="text" id="uploadFilePath" placeholder="src/components">
            <label for="uploadCommitMessage">Commit Message</label>
            <input type="text" id="uploadCommitMessage" placeholder="Uploaded new file">
            <button class="modal-action-btn" onclick="uploadFile()">Upload File</button>
        </div>
    </div>
    <div id="taskQueueModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('taskQueueModal')">&times;</span>
            <h2>Task Queue</h2>
            <p>Manage issues and tasks for this repository</p>
            <h3>Add New Task</h3>
            <label for="taskTitle">Title</label>
            <input type="text" id="taskTitle" placeholder="Task title">
            <label for="taskDescription">Description</label>
            <textarea id="taskDescription" placeholder="Task description"></textarea>
            <button class="modal-action-btn add-task-btn" onclick="addTask()">+ Add Task</button>
            <h3 class="open-tasks-header">Open Tasks (<span id="openTasksCount">0</span>)</h3>
            <div id="tasksList" class="tasks-list">
            </div>
        </div>
    </div>
    <div id="historyModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('historyModal')">&times;</span>
            <h2>Undo/Redo History</h2>
            <p>View the history of file actions for this repository</p>
            <h3>Undo Stack (<span id="undoCount">0</span> actions)</h3>
            <div id="undoList" class="history-stack-container">
                <div class="no-history-message">No actions to undo</div>
            </div>
            <h3 class="redo-header">Redo Stack (<span id="redoCount">1</span> actions)</h3>
            <div id="redoList" class="history-stack-container">
                <div class="history-item redo-item">
                    <span class="history-action-icon">+ Add</span>
                    <span class="history-action-text">Hello</span>
                    <span class="history-action-date">10/7/2025, 5:08:00 PM</span>
                </div>
            </div>
        </div>
    </div>
    <div id="editFileModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('editFileModal')">&times;</span>
            <h2>Edit File</h2>
            <label for="editFileName">File Name</label>
            <input type="text" id="editFileName">
            <label for="editFileContent">File Content</label>
            <textarea id="editFileContent" placeholder="Enter file content here..."></textarea>
            <div class="modal-actions-group">
                <button class="modal-cancel-btn" onclick="closeModal('editFileModal')">Cancel</button>
                <button class="modal-action-btn" onclick="saveFileChanges()">Save Changes</button>
            </div>
        </div>
    </div>
    <div id="deleteFileModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('deleteFileModal')">&times;</span>
            <h2>Delete File</h2>
            <p>Are you sure you want to delete <strong id="deleteFileName"></strong>?</p>
            <div class="modal-actions-group">
                <button class="modal-cancel-btn" onclick="closeModal('deleteFileModal')">No</button>
                <button class="modal-delete-btn" onclick="confirmDeleteFile()">Yes</button>
            </div>
        </div>
    </div>

    <div id="viewFileModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('viewFileModal')">&times;</span>
            <h2>File Content: <span id="viewFileName"></span></h2>
            <div class="file-content-viewer">
                <pre id="viewFileContent"></pre>
            </div>
            <div class="modal-actions-group">
                <button class="modal-cancel-btn" onclick="closeModal('viewFileModal')">Close</button>
                <button class="modal-action-btn" onclick="openEditFileModal(document.getElementById('viewFileName').textContent); closeModal('viewFileModal');">Edit File</button>
            </div>
        </div>
    </div>

    <!-- Branch Management Modals -->
    <div id="createBranchModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('createBranchModal')">&times;</span>
            <h2>Create New Branch</h2>
            <p>Create a new branch from an existing branch</p>
            <label for="baseBranchSelect">Base Branch</label>
            <select id="baseBranchSelect">
                <option value="main">main</option>
            </select>
            <label for="newBranchName">New Branch Name</label>
            <input type="text" id="newBranchName" placeholder="feature/new-feature">
            <div class="modal-actions-group">
                <button class="modal-cancel-btn" onclick="closeModal('createBranchModal')">Cancel</button>
                <button class="modal-action-btn" onclick="createNewBranch()">Create Branch</button>
            </div>
        </div>
    </div>

    <div id="mergeBranchModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('mergeBranchModal')">&times;</span>
            <h2>Merge Branch</h2>
            <p>Merge one branch into another</p>
            <label for="sourceBranchSelect">Source Branch (merge from)</label>
            <select id="sourceBranchSelect">
                <option value="">Select source branch...</option>
            </select>
            <label for="targetBranchSelect">Target Branch (merge into)</label>
            <select id="targetBranchSelect">
                <option value="">Select target branch...</option>
            </select>
            <div class="modal-actions-group">
                <button class="modal-cancel-btn" onclick="closeModal('mergeBranchModal')">Cancel</button>
                <button class="modal-action-btn" onclick="mergeBranches()">Merge Branches</button>
            </div>
        </div>
    </div>

    <!-- History Modal -->
    <div id="historyModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('historyModal')">&times;</span>
            <h2>Action History</h2>
            <div class="history-tabs">
                <button class="tab-button active" onclick="showHistoryTab('undo-tab')">Undo Stack (<span id="undo-stack-count">0</span>)</button>
                <button class="tab-button" onclick="showHistoryTab('redo-tab')">Redo Stack (<span id="redo-stack-count">0</span>)</button>
            </div>
            
            <div id="undo-tab" class="history-tab-content">
                <div id="undo-stack" class="stack-container">
                    <div class="empty-state">No actions to undo</div>
                </div>
            </div>
            
            <div id="redo-tab" class="history-tab-content" style="display: none;">
                <div id="redo-stack" class="stack-container">
                    <div class="empty-state">No actions to redo</div>
                </div>
            </div>
            
            <div class="modal-actions">
                <button class="btn" onclick="closeModal('historyModal')">Close</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Function to show a specific tab in the history modal
        function showHistoryTab(tabId) {
            // Hide all tab contents
            document.querySelectorAll('.history-tab-content').forEach(tab => {
                tab.style.display = 'none';
            });
            
            // Remove active class from all tab buttons
            document.querySelectorAll('.history-tabs .tab-button').forEach(button => {
                button.classList.remove('active');
            });
            
            // Show the selected tab content and mark the button as active
            document.getElementById(tabId).style.display = 'block';
            event.target.classList.add('active');
        }
    </script>
</body>
</html>